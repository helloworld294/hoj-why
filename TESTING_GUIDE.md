# HOJ 单个添加用户功能 - 测试指南

## 测试环境准备

1. 确保HOJ后端服务正在运行
2. 确保前端开发服务器正在运行
3. 确保已登录管理员账户

## 测试步骤

### 1. 基本功能测试

#### 1.1 打开单个添加用户对话框
- [ ] 进入用户管理页面
- [ ] 点击"单个添加用户"按钮
- [ ] 验证对话框正常弹出
- [ ] 验证对话框标题显示正确

#### 1.2 表单字段验证
- [ ] 用户名字段（必填）
  - [ ] 留空时显示错误提示
  - [ ] 输入已存在的用户名时显示错误提示
  - [ ] 输入有效用户名时无错误提示
- [ ] 密码字段（必填）
  - [ ] 留空时显示错误提示
  - [ ] 输入少于6个字符时显示错误提示
  - [ ] 输入超过25个字符时显示错误提示
  - [ ] 输入6-25个字符时无错误提示
- [ ] 邮箱字段（可选）
  - [ ] 留空时无错误提示
  - [ ] 输入无效邮箱格式时显示错误提示
  - [ ] 输入已存在的邮箱时显示错误提示
  - [ ] 输入有效邮箱时无错误提示
- [ ] 真实姓名字段（可选）
  - [ ] 留空时无错误提示
  - [ ] 输入超过255个字符时显示错误提示

#### 1.3 用户类型选择
- [ ] 验证下拉菜单包含所有9种用户类型
- [ ] 验证默认选择"用户(默认)"
- [ ] 验证可以正常切换用户类型

#### 1.4 其他字段
- [ ] 头衔名称字段（可选）
- [ ] 头衔颜色选择器
- [ ] 状态开关（正常/禁用）

### 2. 添加用户测试

#### 2.1 成功添加用户
- [ ] 填写完整的有效信息
- [ ] 点击"确定"按钮
- [ ] 验证显示成功消息
- [ ] 验证对话框自动关闭
- [ ] 验证用户列表自动刷新
- [ ] 验证新用户出现在列表中

#### 2.2 失败情况测试
- [ ] 表单验证失败时无法提交
- [ ] 网络错误时显示错误消息
- [ ] 服务器错误时显示错误消息

### 3. 边界情况测试

#### 3.1 用户名测试
- [ ] 测试最大长度（255字符）
- [ ] 测试特殊字符
- [ ] 测试中文字符

#### 3.2 密码测试
- [ ] 测试最小长度（6字符）
- [ ] 测试最大长度（25字符）
- [ ] 测试特殊字符

#### 3.3 邮箱测试
- [ ] 测试各种邮箱格式
- [ ] 测试国际化邮箱地址

### 4. 用户体验测试

#### 4.1 界面响应
- [ ] 按钮点击响应及时
- [ ] 表单验证实时反馈
- [ ] 加载状态显示正确

#### 4.2 国际化测试
- [ ] 切换到英文界面
- [ ] 验证所有文本正确显示
- [ ] 切换回中文界面

#### 4.3 表单重置
- [ ] 关闭对话框后重新打开
- [ ] 验证表单已重置
- [ ] 验证验证状态已清除

## 常见问题排查

### 1. "查询错误"问题
**可能原因：**
- 后端API接口不存在
- 网络连接问题
- 后端服务未启动

**解决方案：**
- 检查后端服务状态
- 检查网络连接
- 查看浏览器开发者工具的网络请求
- 查看后端日志

### 2. 表单验证问题
**可能原因：**
- 验证规则配置错误
- 国际化文本缺失

**解决方案：**
- 检查验证规则配置
- 检查国际化文件
- 查看浏览器控制台错误

### 3. 用户类型问题
**可能原因：**
- 用户类型值不匹配后端期望
- 权限不足

**解决方案：**
- 检查用户类型值
- 确认管理员权限

## 调试技巧

### 1. 浏览器开发者工具
- 打开Network标签页查看API请求
- 打开Console标签页查看错误信息
- 打开Elements标签页检查DOM结构

### 2. 后端日志
- 查看后端服务日志
- 检查API接口响应

### 3. 前端调试
- 在关键方法中添加console.log
- 检查Vue DevTools中的组件状态

## 测试数据示例

### 有效用户数据
```javascript
{
  username: "testuser001",
  password: "123456",
  email: "test@example.com",
  realname: "测试用户",
  type: 1002,
  status: 0,
  titleName: "测试头衔",
  titleColor: "#409EFF"
}
```

### 无效用户数据
```javascript
{
  username: "", // 空用户名
  password: "123", // 密码太短
  email: "invalid-email", // 无效邮箱
  realname: "a".repeat(300), // 真实姓名太长
  type: 1002,
  status: 0
}
```

## 测试完成标准

- [ ] 所有基本功能正常工作
- [ ] 所有表单验证正确
- [ ] 错误处理完善
- [ ] 用户体验良好
- [ ] 国际化支持完整
- [ ] 边界情况处理正确
